<!doctype html>
<html lang="es" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="color-scheme" content="dark light" />
  <meta name="theme-color" content="#05060A" />
  <meta name="description" content="Panel estilo X: tendencias en tiempo real (open data) + timeline de @GlobalEye_TV. 100% GitHub Pages." />
  <meta name="referrer" content="strict-origin-when-cross-origin" />

  <title>GlobalEye ‚Ä¢ Trends</title>

  <!-- Performance -->
  <link rel="preconnect" href="https://platform.twitter.com" crossorigin />
  <link rel="dns-prefetch" href="//platform.twitter.com" />

  <!-- Manifest + CSS -->
  <link rel="manifest" href="./manifest.webmanifest" />
  <link rel="stylesheet" href="./styles.css" />

  <!-- Icons (prefer PNG, fallback JPG) -->
  <link rel="icon" type="image/png" href="./logo_ojo_png.png" />
  <link rel="icon" type="image/jpeg" href="./logo_ojo.jpg" />
  <link rel="apple-touch-icon" href="./logo_ojo_png.png" />

  <!-- App -->
  <script defer src="./app.js"></script>
</head>

<body>
  <noscript>
    <div class="noscript">
      Necesitas JavaScript activado para ver tendencias y el timeline.
    </div>
  </noscript>

  <!-- HERO / BANNER -->
  <header class="hero" aria-label="GlobalEye banner">
    <img
      class="heroImg"
      src="./banner_ojo.jpg"
      alt="GlobalEye banner"
      loading="eager"
      decoding="async"
      fetchpriority="high"
    />

    <div class="heroOverlay">
      <div class="heroBrand">
        <img
          class="heroLogo"
          src="./logo_ojo_png.png"
          alt="GlobalEye logo"
          loading="eager"
          decoding="async"
          onerror="this.onerror=null;this.src='./logo_ojo.jpg';"
        />
        <div class="heroTxt">
          <div class="heroTitle">OJO OJITO OJETE</div>
          <div class="heroSub">@GlobalEye_TV ‚Ä¢ BLOG OFICIAL</div>
        </div>
      </div>

      <div class="heroCtas">
        <a class="cta ctaPrimary" href="https://x.com/GlobalEye_TV" target="_blank" rel="noreferrer noopener">IR A X</a>
      </div>
    </div>
  </header>

  <div class="app">
    <!-- LEFT NAV -->
    <aside class="left">
      <div class="brand">
        <div class="logo" aria-hidden="true">
          <img
            class="logoImg"
            src="./logo_ojo_png.png"
            alt=""
            loading="lazy"
            decoding="async"
            onerror="this.onerror=null;this.src='./logo_ojo.jpg';"
          />
        </div>
        <div class="brandText">
          <div class="brandTitle">OJO OJITO OJETE</div>
          <div class="brandSub">@GlobalEye_TV</div>
        </div>
      </div>

      <nav class="nav" aria-label="Navegaci√≥n">
        <button class="navItem isActive" data-route="trends" aria-current="page" type="button">
          <span class="ico" aria-hidden="true">‚åÅ</span>
          <span>Tendencias</span>
        </button>

        <button class="navItem" id="btnTicker" type="button">
          <span class="ico" aria-hidden="true">„Ä∞</span>
          <span>Ticker</span>
        </button>

        <button class="navItem" id="btnConfig" type="button">
          <span class="ico" aria-hidden="true">‚öô</span>
          <span>Config</span>
        </button>

        <a class="navItem" href="https://x.com/GlobalEye_TV" target="_blank" rel="noreferrer noopener">
          <span class="ico" aria-hidden="true">üë§</span>
          <span>Perfil en X</span>
        </a>

        <a class="navItem" href="https://x.com/explore" target="_blank" rel="noreferrer noopener">
          <span class="ico" aria-hidden="true">üîé</span>
          <span>Explorar en X</span>
        </a>
      </nav>

      <div class="leftFooter">
        <div class="pill">
          <span class="dot"></span>
          <span id="netStatus">Conectando‚Ä¶</span>
        </div>

        <button id="btnRefresh" class="btn btnPrimary" type="button">
          Actualizar
        </button>

        <button id="btnCompact" class="btn btnGhost" aria-pressed="false" type="button">
          Modo compacto
        </button>

        <div class="hint">
          * ‚ÄúTendencias‚Äù aqu√≠ = se√±ales en tiempo real (open data) + bot√≥n ‚ÄúVer en X‚Äù.
        </div>
      </div>
    </aside>

    <!-- CENTER -->
    <main class="center">
      <header class="topbar">
        <div class="topbarTitle">
          <h1>Tendencias ahora</h1>
          <div class="subtitle" id="lastUpdated">‚Äî</div>
        </div>

        <div class="searchWrap">
          <span class="searchIco" aria-hidden="true">üîé</span>
          <input
            id="q"
            class="search"
            type="search"
            placeholder="Filtra tendencias (ej: #ENVIVO, trump, madrid...)"
            autocomplete="off"
            spellcheck="false"
          />
        </div>
      </header>

      <section class="panel">
        <div class="panelHead">
          <div class="panelTitle">Ranking</div>

          <div class="panelControls">
            <select id="selLang" class="select" title="Idioma de fuentes">
              <option value="spanish" selected>ES (sourcelang:spanish)</option>
              <option value="english">EN (sourcelang:english)</option>
              <option value="mixed">Mixto</option>
            </select>

            <select id="selWindow" class="select" title="Ventana temporal">
              <option value="2H">√öltimas 2h</option>
              <option value="4H" selected>√öltimas 4h</option>
              <option value="6H">√öltimas 6h</option>
              <option value="12H">√öltimas 12h</option>
            </select>

            <select id="selGeo" class="select" title="Foco">
              <option value="ES" selected>Espa√±a / ES</option>
              <option value="GLOBAL">Global</option>
            </select>
          </div>
        </div>

        <div class="subHead">
          <div class="tabs" id="tabsView" role="tablist" aria-label="Vista">
            <button class="tab isActive" type="button" data-view="all" role="tab" aria-selected="true">Todo</button>
            <button class="tab" type="button" data-view="favs" role="tab" aria-selected="false">Favoritos</button>
          </div>

          <div class="tabs tabsCat" id="tabsCat" role="tablist" aria-label="Categor√≠as">
            <button class="tab isActive" type="button" data-cat="all" role="tab" aria-selected="true">Todos</button>
            <button class="tab" type="button" data-cat="news" role="tab" aria-selected="false">Noticias</button>
            <button class="tab" type="button" data-cat="viral" role="tab" aria-selected="false">Viral</button>
            <button class="tab" type="button" data-cat="politics" role="tab" aria-selected="false">Pol√≠tica</button>
            <button class="tab" type="button" data-cat="sports" role="tab" aria-selected="false">Deportes</button>
          </div>
        </div>

        <div id="list" class="trendList" aria-live="polite"></div>

        <div id="empty" class="empty hidden">
          No hay resultados para ese filtro.
        </div>

        <div id="err" class="errorBox hidden"></div>
      </section>

      <section class="panel mini">
        <div class="panelHead">
          <div class="panelTitle">C√≥mo funciona</div>
        </div>
        <div class="miniText">
          Este panel calcula tendencias con titulares recientes (open data) y te da acceso directo a la b√∫squeda en X.
          El timeline de la derecha es tu feed real embebido.
        </div>
      </section>
    </main>

    <!-- RIGHT -->
    <aside class="right">
      <div class="rightCard">
        <div class="rightTitle">Tu timeline</div>
        <div class="rightSub">Posts p√∫blicos de @GlobalEye_TV</div>

        <div class="timelineWrap">
          <a class="twitter-timeline"
             href="https://x.com/GlobalEye_TV"
             data-theme="dark"
             data-chrome="noheader nofooter noborders transparent"
             data-tweet-limit="20">
            Posts by @GlobalEye_TV
          </a>
        </div>
      </div>

      <div class="rightCard">
        <div class="rightTitle">Accesos r√°pidos</div>
        <div class="quick">
          <a class="chip" target="_blank" rel="noreferrer noopener" href="https://x.com/search?q=%23ENVIVO">#ENVIVO</a>
          <a class="chip" target="_blank" rel="noreferrer noopener" href="https://x.com/search?q=%23ULTIMAHORA">#ULTIMAHORA</a>
          <a class="chip" target="_blank" rel="noreferrer noopener" href="https://x.com/search?q=%23BREAKING">#BREAKING</a>
        </div>
      </div>

      <!-- ‚úÖ KO-FI SOLO AQU√ç (1 vez) -->
      <div class="rightCard">
        <div class="rightTitle">Donativos</div>
        <div class="rightSub">
          Si te mola el proyecto, puedes apoyar a GlobalEye con un caf√© ‚òï
        </div>
        <a class="kofiCard" href="https://ko-fi.com/global_eye" target="_blank" rel="noreferrer noopener">
          <span class="kofiDot" aria-hidden="true">‚òï</span>
          <span>ko-fi.com/global_eye</span>
          <span class="kofiGo" aria-hidden="true">‚Üí</span>
        </a>
      </div>

      <div class="rightCard subtle">
        <div class="rightTitle">Nota</div>
        <div class="rightSub">
          El timeline embebido no ‚Äúhace polling‚Äù infinito; se refresca al recargar.
        </div>
      </div>
    </aside>
  </div>

  <!-- TICKER -->
  <div id="tickerBar" class="ticker hidden" role="region" aria-label="Ticker de tendencias">
    <div class="tickerInner">
      <img class="tickerLogo" src="./logo_ojo_gif.gif" alt="" loading="lazy" decoding="async" />
      <div class="tickerViewport">
        <div id="tickerTrack" class="tickerTrack"></div>
      </div>
      <button id="tickerClose" class="tickerClose" type="button" title="Cerrar ticker" aria-label="Cerrar ticker">‚úï</button>
    </div>
  </div>

  <!-- TOASTS -->
  <div id="toastHost" class="toasts" aria-live="polite" aria-relevant="additions"></div>

  <!-- CONFIG MODAL -->
  <div id="cfgModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="cfgTitle">
    <div class="modalCard">
      <div class="modalHead">
        <div class="modalTitle" id="cfgTitle">Configuraci√≥n</div>
        <button id="cfgClose" class="iconBtn" type="button" aria-label="Cerrar">‚úï</button>
      </div>

      <div class="modalGrid">
        <label class="field">
          <span>Auto-refresh</span>
          <input id="cfgAuto" type="checkbox" />
        </label>

        <label class="field">
          <span>Intervalo (seg)</span>
          <input id="cfgEvery" type="number" min="35" max="900" step="5" inputmode="numeric" />
        </label>

        <label class="field">
          <span>Top tendencias</span>
          <input id="cfgMaxTrends" type="number" min="10" max="60" step="1" inputmode="numeric" />
        </label>

        <label class="field">
          <span>Alertas suaves</span>
          <input id="cfgAlerts" type="checkbox" />
        </label>

        <label class="field">
          <span>Modo ticker</span>
          <input id="cfgTicker" type="checkbox" />
        </label>

        <label class="field">
          <span>Velocidad ticker (seg/vuelta)</span>
          <input id="cfgTickerSpeed" type="number" min="12" max="120" step="1" inputmode="numeric" />
        </label>

        <div class="modalActions">
          <button id="cfgSave" class="btn btnPrimary" type="button">Guardar</button>
          <button id="cfgReset" class="btn btnGhost" type="button">Reset</button>
        </div>

        <div class="modalHint">
          Consejo: si usas OBS, activa ‚ÄúModo ticker‚Äù + ‚ÄúModo compacto‚Äù.
        </div>
      </div>
    </div>
  </div>

  <!-- X widgets loader (oficial) -->
  <script>
    window.twttr = (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0], t = window.twttr || {};
      if (d.getElementById(id)) return t;
      js = d.createElement(s); js.id = id;
      js.src = "https://platform.twitter.com/widgets.js";
      fjs.parentNode.insertBefore(js, fjs);
      t._e = [];
      t.ready = function(f) { t._e.push(f); };
      return t;
    }(document, "script", "twitter-wjs"));
  </script>
</body>
</html>
