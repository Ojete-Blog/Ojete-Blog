<!doctype html>
<html lang="es" data-theme="black">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="color-scheme" content="dark" />
  <meta name="theme-color" content="#000000" />
  <meta name="description" content="GlobalEye Trends — Memes tipo Reddit + tendencias + timeline embebido de X." />
  <meta name="referrer" content="strict-origin-when-cross-origin" />

  <link rel="manifest" href="./manifest.webmanifest" />
  <link rel="icon" href="./logo_ojo_favicon.png" />
  <link rel="apple-touch-icon" href="./logo_ojo_favicon.png" />

  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,400,0,0&display=swap" rel="stylesheet" />

  <link rel="stylesheet" href="./styles.css" />
  <script defer src="./app.js"></script>

  <title>GlobalEye — Memes & Trends</title>
</head>

<body>
  <header class="topbar" role="banner" aria-label="GlobalEye">
    <div class="topbarBanner" aria-hidden="true">
      <img class="topbarBannerImg" src="./banner_ojo.jpg" alt="" decoding="async" fetchpriority="high" />
      <div class="topbarBannerShade"></div>
    </div>

    <div class="topbarInner">
      <div class="brand">
        <img class="brandLogo" src="./logo_ojo_png.png" alt="GlobalEye" />
        <div class="brandText">
          <div class="brandTitle">GLOBAL EYE</div>
          <div class="brandSub">Memes (48h) · Tendencias · X timeline</div>
        </div>
      </div>

      <nav class="tabs" aria-label="Vistas">
        <button id="tabMemes" class="tab isActive" type="button">
          <span class="msr">collections</span><span>Memes</span>
        </button>
        <button id="tabTrends" class="tab" type="button">
          <span class="msr">trending_up</span><span>Tendencias</span>
        </button>
        <button id="tabFavs" class="tab" type="button">
          <span class="msr">star</span><span>Favoritos</span>
        </button>
      </nav>

      <div class="topActions">
        <a class="btn ghost" href="https://x.com/GlobalEye_TV" target="_blank" rel="noreferrer">
          <span class="msr">open_in_new</span><span>@GlobalEye_TV</span>
        </a>

        <button id="btnReloadX" class="btn ghost" type="button" title="Recargar timeline de X">
          <span class="msr">refresh</span><span>Feed</span>
        </button>

        <button id="btnRefresh" class="btn" type="button" title="Actualizar datos">
          <span class="msr">sync</span><span>Actualizar</span>
        </button>

        <button id="btnCompact" class="btn ghost" type="button" title="Modo compacto">
          <span class="msr">density_small</span><span>Compacto</span>
        </button>

        <button id="btnTicker" class="btn ghost" type="button" title="Ticker inferior (OBS)">
          <span class="msr">view_headline</span><span>Ticker</span>
        </button>

        <button id="btnConfig" class="btn ghost" type="button" title="Configuración">
          <span class="msr">settings</span><span>Config</span>
        </button>
      </div>

      <div class="statusBar" role="status" aria-label="Estado">
        <span class="pill"><span class="msr">public</span><span id="netStatus">Online</span></span>
        <span class="pill"><span class="msr">schedule</span><span id="lastUpdated">—</span></span>
      </div>
    </div>
  </header>

  <main class="layout" role="main">
    <section class="mainCol">
      <div class="panelHead">
        <div class="searchWrap">
          <span class="msr">search</span>
          <input id="q" class="search" type="search" placeholder="Buscar…" autocomplete="off" />
        </div>

        <div class="filters" aria-label="Filtros">
          <select id="selSource" class="select" title="Fuente memes">
            <option value="mix" selected>Mix</option>
            <option value="memes">r/memes</option>
            <option value="dankmemes">r/dankmemes</option>
            <option value="meirl">r/me_irl</option>
            <option value="wholesome">r/wholesomememes</option>
            <option value="funny">r/funny</option>
          </select>

          <select id="selSort" class="select" title="Orden">
            <option value="new" selected>New</option>
            <option value="hot">Hot</option>
            <option value="top">Top</option>
            <option value="best">Best (tus votos)</option>
          </select>

          <select id="selRange" class="select" title="Rango">
            <option value="24">24h</option>
            <option value="48" selected>48h</option>
            <option value="72">72h</option>
          </select>
        </div>
      </div>

      <div id="errBanner" class="banner err hidden" role="alert"></div>
      <div id="emptyBanner" class="banner empty hidden" role="status">No hay resultados con estos filtros.</div>

      <section id="viewMemes" class="view">
        <div id="memesList" class="list" aria-live="polite"></div>
      </section>

      <section id="viewTrends" class="view hidden">
        <div class="sectionTitle">
          <span class="msr">trending_up</span>
          <span>Tendencias (open data)</span>
          <span class="muted">· abre búsqueda en X</span>
        </div>
        <div id="trendsList" class="list trends" aria-live="polite"></div>
      </section>

      <section id="viewFavs" class="view hidden">
        <div class="sectionTitle">
          <span class="msr">star</span>
          <span>Favoritos</span>
        </div>
        <div id="favsList" class="list" aria-live="polite"></div>
      </section>
    </section>

    <aside class="sideCol">
      <div class="card">
        <div class="cardTitle">
          <span class="msr">for_you</span><span>Timeline X</span>
        </div>

        <div id="xTimelineMount" class="xMount">
          <!-- app.js monta aquí el widget -->
        </div>

        <div id="xFallback" class="xFallback hidden">
          <div class="xFallbackText">
            El widget puede estar bloqueado por privacidad/adblock.
          </div>
          <a class="btn" href="https://x.com/GlobalEye_TV" target="_blank" rel="noreferrer">
            <span class="msr">open_in_new</span><span>Abrir perfil</span>
          </a>
        </div>
      </div>

      <div class="card">
        <div class="cardTitle">
          <span class="msr">info</span><span>Notas</span>
        </div>
        <div class="hint">
          Memes: solo posts con imagen/vídeo (sin NSFW).<br />
          Tendencias: calculadas desde titulares (GDELT).<br />
          Votos: se guardan localmente (tu navegador).
        </div>
      </div>
    </aside>
  </main>

  <div id="tickerBar" class="ticker hidden" aria-label="Ticker">
    <div class="tickerInner">
      <span class="msr">view_headline</span>
      <div id="tickerTrack" class="tickerTrack"></div>
    </div>
  </div>

  <div id="cfgModal" class="modal hidden" role="dialog" aria-modal="true" aria-label="Configuración">
    <div class="modalCard">
      <div class="modalHead">
        <div class="modalTitle">
          <span class="msr">settings</span><span>Configuración</span>
        </div>
        <button id="cfgClose" class="iconBtn" type="button" aria-label="Cerrar">
          <span class="msr">close</span>
        </button>
      </div>

      <div class="modalBody">
        <label class="row">
          <span>Auto-refresh</span>
          <input id="cfgAuto" type="checkbox" checked />
        </label>

        <label class="row">
          <span>Actualizar cada (seg)</span>
          <input id="cfgEvery" class="input" type="number" min="35" max="900" value="120" />
        </label>

        <label class="row">
          <span>Máx memes</span>
          <input id="cfgMaxPosts" class="input" type="number" min="10" max="120" value="45" />
        </label>

        <label class="row">
          <span>Ocultar media (solo títulos)</span>
          <input id="cfgNoThumbs" type="checkbox" />
        </label>

        <label class="row">
          <span>Velocidad ticker</span>
          <input id="cfgTickerSpeed" class="input" type="number" min="30" max="300" value="120" />
        </label>
      </div>

      <div class="modalFoot">
        <button id="cfgSave" class="btn" type="button">
          <span class="msr">check</span><span>Guardar</span>
        </button>
      </div>
    </div>
  </div>
</body>
</html>
